# update_fastlane

default_platform(:ios)

platform :ios do

  # desc "Ensure valid individual code signing assets for project, using person-based schema"
  # lane :solo_development do
  #   cert
  #   sigh
  # end

  # lane :team_development do
  #   register_devices(
  #     devices: {
  #       "brian excess" => "00008020-001C491C0268002E",
  #       "Pro 120" => "f25bd75b4b3d643c749902dce888ae83c1f1f4ad"
  #     }
  #   )
  #   match(type: "development")
  # end

  desc "Ensure app is registered with App Store Connect"
  lane :sync_app_info do
    produce(
      username: "bschick1@mac.com",
      app_identifier: "com.razeware.ChewChewTrain",
      app_name: "Chew Chew Train",
      team_name: "Brian Schick",
      itc_team_name: "Brian Schick",
      language: "English",
      app_version: "1.0"
    )
  end

  lane :sync_device_info do
    register_devices(
      devices: {
        "brian excess" => "00008020-001C491C0268002E",
        "Pro 120" => "f25bd75b4b3d643c749902dce888ae83c1f1f4ad"
      }
    )
  end

  lane :sync_for_development do
    sync_app_info
    sync_device_info
    match(type: "development")
  end

  lane :sync_for_adhoc do
    sync_app_info
    sync_device_info
    match(type: "adhoc")
  end

  lane :sync_for_appstore do
    sync_app_info
    sync_device_info
    match(type: "appstore")
  end

  lane :export_adhoc do
    sync_for_adhoc
    gym(
      output_directory: "Export_AdHoc",
      export_method: "ad-hoc"
    )
  end

  lane :export_itunes_connect do
    sync_for_appstore
    gym(
      output_directory: "Export_iTunesConnect",
      export_method: "app-store"
    )
  end

end
